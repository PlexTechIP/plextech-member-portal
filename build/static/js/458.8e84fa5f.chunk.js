"use strict";(self.webpackChunkplexfinance=self.webpackChunkplexfinance||[]).push([[458],{17762:function(n,e,t){t.d(e,{E:function(){return c}});var r=t(63681),o=t(41727),s=t(47131),i=(t(47313),t(83965)),a=t(46417);function c(n){return(0,a.jsx)("form",{style:{width:"100%"},children:(0,a.jsx)(r.Z,{variant:"outlined",onChange:function(e){return n.onChange(e.target.value)},value:n.comment,label:n.message,fullWidth:!0,InputProps:{endAdornment:(0,a.jsx)(o.Z,{position:"end",children:(0,a.jsx)(s.Z,{onClick:n.onSubmit,type:"submit",children:(0,a.jsx)(i.Z,{})})})}})})}},63931:function(n,e,t){t.d(e,{C:function(){return j}});var r,o,s,i,a=t(30168),c=t(42832),u=t(47131),d=t(70501),l=t(25673),p=t(47313),h=t(96694),f=t(53115),Z=t(32094),x=t(85979),m=t(46417);function j(n){return(0,p.useEffect)((function(){console.warn(n.error)})),(0,m.jsx)(b,{open:n.open,children:(0,m.jsx)(g,{children:(0,m.jsxs)(c.Z,{spacing:2,children:[(0,m.jsxs)(c.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,m.jsxs)(v,{children:["Error",n.error.errorCode&&" ".concat(n.error.errorCode),":"," ",n.error.errorMessage]}),(0,m.jsx)(u.Z,{onClick:function(){window.location.reload()},children:(0,m.jsx)(Z.Z,{})})]}),(0,m.jsxs)(w,{children:["Try refreshing the page and contact"," ",(0,m.jsx)("a",{href:"mailto:shamith09@berkeley.edu?subject=[Plexfinance Error]",children:"shamith09@berkeley.edu"})," ","if the issue persists."]}),(0,m.jsx)("img",{src:x.Uf,alt:"error"})]})})})}var g=(0,h.Z)(d.Z)(r||(r=(0,a.Z)(["\n  padding: 48px;\n  border-radius: 48px;\n"]))),v=f.ZP.h1(o||(o=(0,a.Z)(["\n  margin: 0px;\n"]))),w=f.ZP.p(s||(s=(0,a.Z)(["\n  margin: 0px;\n"]))),b=(0,f.ZP)(l.Z)(i||(i=(0,a.Z)(["\n  width: 50%;\n  min-width: 500px;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  padding: 64px;\n"])))},84458:function(n,e,t){t.r(e),t.d(e,{ForumPage:function(){return Cn}});var r,o,s=t(30168),i=t(1413),a=t(74165),c=t(15861),u=t(29439),d=t(19860),l=t(42832),p=t(69099),h=t(25673),f=t(63931),Z=t(47313),x=t(53115),m=t(96694),j=t(14313),g=t(47131),v=t(73428),w=t(70501),b=t(17762),y=t(11198),C=t(3665),P=t(29428),I=t(46417);function k(n){var e=n.post,t=n.userId,r=(0,Z.useState)(e.upvotes.includes(t)),o=(0,u.Z)(r,2),s=o[0],i=o[1],a=(0,Z.useState)(e.downvotes.includes(t)),c=(0,u.Z)(a,2),d=c[0],p=c[1],h=function(r){if(n.onVote){var o={removeFromDownvote:!1,removeFromUpvote:!1,addToDownvote:!1,addToUpvote:!1,postId:e.id};r?(s?(e.upvotes=e.upvotes.filter((function(n){return n!==t})),o.removeFromUpvote=!0):(e.upvotes.push(n.userId),o.addToUpvote=!0,d&&(e.downvotes=e.downvotes.filter((function(n){return n!==t})),p(!1),o.removeFromDownvote=!0)),i(!s)):(d?(e.downvotes=e.downvotes.filter((function(n){return n!==t})),o.removeFromDownvote=!0):(e.downvotes.push(n.userId),o.addToDownvote=!0,s&&(e.upvotes=e.upvotes.filter((function(n){return n!==t})),i(!1),o.removeFromUpvote=!0)),p(!d)),n.onVote(o)}};return(0,I.jsxs)(l.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,I.jsx)(g.Z,{onClick:function(){return h(!0)},children:(0,I.jsx)(C.Z,{style:{color:s?"green":"inherit"}})}),(0,I.jsx)(_,{children:(0,I.jsx)(N,{children:e.upvotes.length-e.downvotes.length})}),(0,I.jsx)(g.Z,{onClick:function(){return h(!1)},children:(0,I.jsx)(P.Z,{style:{color:d?"red":"inherit"}})})]})}var S,D,Y,E,F,T,_=x.ZP.div(r||(r=(0,s.Z)(["\n  width: 2em;\n  text-align: center;\n"]))),N=x.ZP.p(o||(o=(0,s.Z)(["\n  margin: 0;\n"])));function V(n){var e=n.post,t=n.open,r=(0,Z.useState)(""),o=(0,u.Z)(r,2),s=o[0],i=o[1];return(0,I.jsx)(q,{open:t,children:(0,I.jsx)(W,{children:(0,I.jsxs)(l.Z,{spacing:2,children:[(0,I.jsx)(l.Z,{children:(0,I.jsxs)(B,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,I.jsx)(H,{children:e.title}),(0,I.jsx)(g.Z,{onClick:n.onClose,children:(0,I.jsx)(y.Z,{fontSize:"large"})})]})}),(0,I.jsx)(j.Z,{}),(0,I.jsx)(J,{children:e.body}),(0,I.jsx)(b.E,{comment:s,onChange:i,onSubmit:function(n){n.preventDefault(),i("")},message:"Add Comment"}),(0,I.jsxs)(B,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,I.jsx)(K,{children:n.post.anonymous?"Anonymous":"".concat(n.post.first_name," ").concat(n.post.last_name)}),(0,I.jsx)(K,{children:e.date.format("MM/DD/YYYY")}),(0,I.jsx)(k,{post:n.post,onVote:n.onVote,userId:n.userId})]})]})})})}var M,A,U,z,G,L,W=(0,m.Z)(w.Z)(S||(S=(0,s.Z)(["\n  border-radius: 48px;\n  padding: 32px;\n  text-align: left;\n  display: flex;\n  flex-direction: column;\n"]))),q=(0,x.ZP)(h.Z)(D||(D=(0,s.Z)(["\n  width: 50%;\n  min-width: 500px;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  padding: 64px;\n"]))),B=(0,m.Z)(l.Z)(Y||(Y=(0,s.Z)(["\n  width: 100%;\n"]))),H=x.ZP.h1(E||(E=(0,s.Z)(["\n  margin: 0;\n"]))),J=x.ZP.p(F||(F=(0,s.Z)(["\n  margin: 0;\n"]))),K=x.ZP.h4(T||(T=(0,s.Z)(["\n  margin: 0;\n"]))),O=t(32265);function Q(n){var e=(0,Z.useState)(!1),t=(0,u.Z)(e,2),r=t[0],o=t[1],s=(0,d.Z)().palette.mode;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(V,{open:r,post:n.post,onClose:function(){return o(!1)},onVote:n.onVote,userId:n.userId}),(0,I.jsx)(tn,{children:(0,I.jsxs)(l.Z,{spacing:2,children:[(0,I.jsxs)(rn,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,I.jsx)(on,{children:n.post.title}),(0,I.jsx)(sn,{children:n.post.date.format("MM/DD/YYYY")})]}),(0,I.jsx)(j.Z,{}),(0,I.jsxs)(l.Z,{direction:"row",alignItems:"center",children:[(0,I.jsx)(cn,{children:n.post.body.length>100?n.post.body.slice(0,100)+"...":n.post.body}),n.post.body.length>100&&(0,I.jsx)("button",{onClick:function(){return o(!0)},style:{color:"dark"===s?"lightblue":"blue",textDecoration:"inherit",backgroundColor:"transparent",border:"none",cursor:"pointer",fontFamily:"inherit",fontSize:"inherit"},children:"see more"})]}),(0,I.jsxs)(rn,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,I.jsx)(an,{children:n.post.anonymous?"Anonymous":"".concat(n.post.first_name," ").concat(n.post.last_name)}),(0,I.jsx)(g.Z,{onClick:function(){return o(!0)},children:(0,I.jsx)(O.Z,{fontSize:"small"})}),(0,I.jsx)(k,{post:n.post,onVote:n.onVote,userId:n.userId})]})]})})]})}var R,X,$,nn,en,tn=(0,m.Z)(v.Z)(M||(M=(0,s.Z)(["\n  padding: 32px;\n  text-align: left;\n  display: flex;\n  flex-direction: column;\n  border-radius: 48px;\n"]))),rn=(0,m.Z)(l.Z)(A||(A=(0,s.Z)(["\n  width: 100%;\n"]))),on=x.ZP.h1(U||(U=(0,s.Z)(["\n  margin: 0;\n"]))),sn=x.ZP.h2(z||(z=(0,s.Z)(["\n  margin: 0;\n"]))),an=x.ZP.h4(G||(G=(0,s.Z)(["\n  margin: 0;\n"]))),cn=x.ZP.p(L||(L=(0,s.Z)(["\n  margin: 0;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]))),un=t(10658),dn=t.n(un),ln=t(65964),pn=t(5211),hn=t(45439);function fn(n){(0,Z.useEffect)((function(){var n=function(){var n=(0,c.Z)((0,a.Z)().mark((function n(){var e,t,o,s;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,hn.N)("/forum/","PATCH");case 2:if(e=n.sent,t=(0,u.Z)(e,2),o=t[0],s=t[1],o){n.next=9;break}return r(s.error),n.abrupt("return");case 9:o?d({firstName:s.firstName,lastName:s.lastName}):r(s.error);case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[]);var e=(0,Z.useState)(),t=(0,u.Z)(e,2),r=(t[0],t[1]),o=(0,Z.useState)({firstName:"",lastName:""}),s=(0,u.Z)(o,2),i=s[0],d=s[1],p=(0,Z.useState)({user_id:n.userId,first_name:i.first_name,last_name:i.last_name,title:"",body:"",date:dn()(),images:[],anonymous:!1,private:!1,upvotes:[],downvotes:[]}),h=(0,u.Z)(p,2),f=h[0];h[1];return(0,I.jsx)(mn,{children:(0,I.jsxs)(l.Z,{spacing:2,children:[(0,I.jsx)(l.Z,{children:(0,I.jsxs)(jn,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,I.jsx)(gn,{children:f.title}),(0,I.jsx)(g.Z,{onClick:n.onClose,children:(0,I.jsx)(y.Z,{fontSize:"large"})})]})}),(0,I.jsx)(j.Z,{}),(0,I.jsx)(vn,{children:f.body}),(0,I.jsxs)(jn,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,I.jsx)(wn,{children:f.anonymous?"Anonymous":"".concat(f.first_name," ").concat(f.last_name)}),(0,I.jsx)(wn,{children:f.date.format("MM/DD/YYYY")}),(0,I.jsx)(k,{post:f,onVote:function(){},userId:n.userId})]})]})})}var Zn,xn,mn=(0,m.Z)(w.Z)(R||(R=(0,s.Z)(["\n  border-radius: 48px;\n  padding: 32px;\n  text-align: left;\n  display: flex;\n  flex-direction: column;\n"]))),jn=(0,m.Z)(l.Z)(X||(X=(0,s.Z)(["\n  width: 100%;\n"]))),gn=x.ZP.h1($||($=(0,s.Z)(["\n  margin: 0;\n"]))),vn=x.ZP.p(nn||(nn=(0,s.Z)(["\n  margin: 0;\n"]))),wn=x.ZP.h4(en||(en=(0,s.Z)(["\n  margin: 0;\n"]))),bn=t(7861),yn=t(45279);function Cn(n){var e=(0,Z.useState)(),t=(0,u.Z)(e,2),r=t[0],o=t[1],s=(0,Z.useState)([]),h=(0,u.Z)(s,2),x=h[0],m=h[1],j=(0,Z.useState)(!1),g=(0,u.Z)(j,2),v=g[0],w=g[1],b=function(){var n=(0,c.Z)((0,a.Z)().mark((function n(e){var t,r,s,i;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,hn.N)("/forum/","PUT",e);case 2:t=n.sent,r=(0,u.Z)(t,2),s=r[0],i=r[1],s||o(i.error);case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();(0,Z.useEffect)((function(){var n=function(){var n=(0,c.Z)((0,a.Z)().mark((function n(){var e,t,r,s;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,hn.N)("/forum/","GET");case 2:e=n.sent,t=(0,u.Z)(e,2),r=t[0],s=t[1],r||o(s.error),r||o(s.error),m(s.posts.map((function(n){return(0,i.Z)((0,i.Z)({},n),{},{date:dn()(n.date)})})));case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[n]);var y=(0,Z.useState)(!1),C=(0,u.Z)(y,2),P=C[0],k=C[1];(0,Z.useEffect)((function(){var n=function(){var n=(0,c.Z)((0,a.Z)().mark((function n(){var e,t,r,s;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,hn.N)("/profile/","GET");case 2:e=n.sent,t=(0,u.Z)(e,2),r=t[0],s=t[1],r||o(s.error),k(s.treasurer);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[n]);var S=(0,d.Z)();return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(ln.ql,{children:[(0,I.jsx)("title",{children:"Forum"}),(0,I.jsx)("meta",{name:"description",content:"An anonymous forum to discuss anything PlexTech related."})]}),r&&(0,I.jsx)(f.C,{open:!!r,error:r}),(0,I.jsx)(In,{open:v,children:(0,I.jsx)(fn,{userId:(0,bn.Z)((0,yn.LP)()).sub,onClose:function(){return w(!1)}})}),(0,I.jsx)(Pn,{children:(0,I.jsxs)(l.Z,{spacing:2,children:[(0,I.jsx)(p.Z,{onClick:function(){return w(!0)},startIcon:Z.cloneElement((0,I.jsx)(pn.Z,{})),fullWidth:!0,variant:"contained",style:{backgroundColor:S.palette.background.default},children:"Create Post"}),x.filter((function(n){return!n.private||P})).map((function(n){return(0,I.jsx)(Q,{isTreasurer:P,post:n,userId:(0,bn.Z)((0,yn.LP)()).sub,onVote:b},n.id)}))]})})]})}var Pn=x.ZP.div(Zn||(Zn=(0,s.Z)(["\n  min-height: 95%;\n  width: 50%;\n  min-width: 500px;\n  margin: auto;\n  padding: 64px;\n  .MuiButton-root {\n    border-radius: 48px;\n  }\n"]))),In=(0,x.ZP)(h.Z)(xn||(xn=(0,s.Z)(["\n  width: 50%;\n  min-width: 500px;\n  height: 100%;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  padding: 64px;\n"])))}}]);