"use strict";(self.webpackChunkplexfinance=self.webpackChunkplexfinance||[]).push([[726],{58574:(e,n,t)=>{t.d(n,{A:()=>u});var a=t(5446),s=t(2235),r=t(88981),l=t(25333),i=t(9950),o=t(4804),c=t(54975),d=t(44414);function u(e){return(0,i.useEffect)((()=>{console.warn(e.error)})),(0,d.jsx)(a.A,{open:e.open,className:"w-1/2 min-w-[500px] h-full absolute inset-0 m-auto p-16",children:(0,d.jsx)(s.A,{className:"p-12 !rounded-[48px]",children:(0,d.jsxs)(r.A,{spacing:2,children:[(0,d.jsxs)(r.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,d.jsxs)("h1",{className:"m-0 text-3xl",children:["Error",e.error.errorCode&&" ".concat(e.error.errorCode),":"," ",e.error.errorMessage]}),(0,d.jsx)(l.A,{onClick:()=>{window.location.reload()},children:(0,d.jsx)(o.A,{})})]}),(0,d.jsxs)("p",{className:"m-0",children:["Try refreshing the page and contact"," ",(0,d.jsx)("a",{href:"mailto:shamith09@berkeley.edu?subject=[Plexfinance Error]",children:"shamith09@berkeley.edu"})," ","if the issue persists."]}),(0,d.jsx)("img",{src:c.kD,alt:"error"})]})})})}},8036:(e,n,t)=>{t.d(n,{C:()=>l});t(9950);var a=t(28510),s=t(96583),r=t(44414);function l(e){return setTimeout((()=>{e.onClose()}),4e3),(0,r.jsx)(s.A,{onClose:e.onClose,open:e.open,PaperProps:{className:"!rounded-[48px] p-12"},children:(0,r.jsx)(a.A,{mode:a.F.SUCCESS})})}},22475:(e,n,t)=>{t.r(n),t.d(n,{ProfilePage:()=>C});var a=t(89379),s=t(9950),r=t(76455),l=t(58574),i=t(48089),o=t(88981),c=t(75165),d=t(41413),u=t(25333),m=t(87498),h=t(2257),x=t(64068),p=t(53777),b=t(8036),g=t(71559),j=t.n(g),v=t(96583),f=t(28170),w=t(79739),A=t(33742),y=t(44414);const k=j();function C(e){var n,t,g,j,C,N;const[_,S]=(0,s.useState)(),[P,W]=(0,s.useState)(),[T,U]=(0,s.useState)(""),[I,E]=(0,s.useState)(!1),[F,R]=(0,s.useState)(null),q=s.useRef(null),[L,D]=(0,s.useState)(!1),[B,M]=(0,s.useState)(""),[$,Y]=(0,s.useState)(""),[G,O]=(0,s.useState)(""),[Z,z]=(0,s.useState)(!1),[H,J]=(0,s.useState)(""),[K,Q]=(0,s.useState)(""),[V,X]=(0,s.useState)(""),[ee,ne]=(0,s.useState)(""),[te,ae]=(0,s.useState)(""),[se,re]=(0,s.useState)(""),[le,ie]=(0,s.useState)(""),[oe,ce]=(0,s.useState)(""),[de,ue]=(0,s.useState)(1.2);(0,s.useEffect)((()=>{(async()=>{const[e,n]=await(0,x.A)("/profile/","GET");e?(W(n),D(n.treasurer),J(n.bluevine_email),Q(n.bluevine_password),X(n.current_position||""),ne(n.profile_blurb||""),ae(n.linkedin_username||""),re(n.instagram_username||""),ie(n.calendly_username||""),ce(n.current_company||""),U("".concat("https://plextech.studentorg.berkeley.edu/member-portal-api","/profile/image/").concat(n.id,"?").concat((new Date).getTime())),n.bank&&(M(n.bank.account_number),Y(n.bank.routing_number),O(n.bank.bank_name))):S(n.error)})()}),[e]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(r.mg,{children:[(0,y.jsx)("title",{children:"Profile"}),(0,y.jsx)("meta",{name:"description",content:"Profile information"})]}),_&&(0,y.jsx)(l.A,{open:!!_,error:_}),(0,y.jsx)("div",{className:"min-h-[95%] w-3/4 min-w-[500px] mx-auto px-16 pt-8 !rounded-[48px]",children:(0,y.jsx)(i.A,{className:"p-12 w-4/5 !rounded-[32px]",children:(0,y.jsx)(o.A,{spacing:4,children:P&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(o.A,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,y.jsx)("h1",{className:"text-2xl m-0",children:"Member Details"}),(0,y.jsx)(c.A,{onClick:async()=>{const[e,n]=await(0,x.A)("/profile/","PUT",{current_position:V,profile_blurb:ee,linkedin_username:te,instagram_username:se,calendly_username:le,current_company:oe});e?z(!0):S(n.error)},variant:"contained",disabled:ee===P.profile_blurb&&te===P.linkedin_username&&se===P.instagram_username&&le===P.calendly_username&&oe===P.current_company||""!==te&&!te.startsWith("https://www.linkedin.com/")||""!==se&&!se.startsWith("https://www.instagram.com/")||""!==le&&!le.startsWith("https://calendly.com/")||""===ee,children:"Update"})]}),(0,y.jsx)("div",{className:"flex flex-col items-center mb-4",children:(0,y.jsx)("div",{className:"relative",children:(0,y.jsxs)("div",{className:"flex items-end",children:[(0,y.jsxs)("div",{className:"flex flex-col items-center",children:[(0,y.jsx)("h3",{className:"text-lg mb-2",children:"Profile Picture"}),(0,y.jsx)(d.A,{src:T,sx:{width:150,height:150},className:"cursor-pointer"}),(0,y.jsx)("input",{accept:"image/*",type:"file",id:"icon-button-file",onChange:e=>{e.target.files&&e.target.files[0]&&(R(e.target.files[0]),E(!0))},className:"hidden"})]}),(0,y.jsx)("label",{htmlFor:"icon-button-file",children:(0,y.jsx)(u.A,{className:"absolute bottom-0 right-0 bg-white shadow-md hover:bg-gray-100",component:"span",children:(0,y.jsx)(A.A,{})})})]})})}),(0,y.jsxs)(v.A,{open:I,onClose:()=>E(!1),PaperProps:{style:{borderRadius:"24px",padding:"16px"}},children:[(0,y.jsxs)(f.A,{className:"!pb-0",children:[(0,y.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Profile Picture"}),F&&(0,y.jsxs)("div",{className:"flex flex-col items-center",children:[(0,y.jsx)(k,{ref:q,image:F,width:250,height:250,border:50,borderRadius:125,color:[0,0,0,.6],scale:de}),(0,y.jsxs)("div",{className:"mt-6 w-full",children:[(0,y.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Zoom"}),(0,y.jsx)(m.Ay,{value:de,min:1,max:3,step:.1,onChange:(e,n)=>ue(n)})]})]})]}),(0,y.jsxs)(w.A,{className:"p-6",children:[(0,y.jsx)(c.A,{onClick:()=>E(!1),children:"Cancel"}),(0,y.jsx)(c.A,{variant:"contained",onClick:async()=>{if(q.current){const e=q.current.getImageScaledToCanvas(),n=document.createElement("canvas");n.width=500,n.height=500;const t=n.getContext("2d");null===t||void 0===t||t.drawImage(e,0,0,500,500),n.toBlob((async e=>{if(!e)return;const n=new FormData;n.append("image",e,"profile.jpg");const[t]=await(0,x.A)("/profile/image/","PUT",n);t&&(U("".concat("https://plextech.studentorg.berkeley.edu/member-portal-api","/profile/image/").concat(null===P||void 0===P?void 0:P.id,"?").concat((new Date).getTime())),E(!1),z(!0))}),"image/jpeg",.8)}},children:"Save"})]})]}),(0,y.jsx)(h.A,{fullWidth:!0,label:"Current Position (admin only)",value:V,onChange:e=>X(e.target.value),InputProps:{readOnly:!L},disabled:!L}),(0,y.jsx)(h.A,{fullWidth:!0,label:"Profile Blurb",value:ee,onChange:e=>ne(e.target.value),multiline:!0,rows:4,required:!0,inputProps:{maxLength:250},helperText:"".concat(ee.length," / 250")}),(0,y.jsx)(h.A,{fullWidth:!0,label:"LinkedIn URL",value:te,onChange:e=>ae(e.target.value),error:""!==te&&!te.startsWith("https://www.linkedin.com/")||""===te&&te!==P.linkedin_username,helperText:""===te||te.startsWith("https://www.linkedin.com/")?"":"Must be a valid LinkedIn URL",required:!0}),(0,y.jsx)(h.A,{fullWidth:!0,label:"Instagram URL",value:se,onChange:e=>re(e.target.value),error:""!==se&&!se.startsWith("https://www.instagram.com/")||""===se&&se!==P.instagram_username,helperText:""===se||se.startsWith("https://www.instagram.com/")?"":"Must be a valid Instagram URL",required:!0}),(0,y.jsx)(h.A,{fullWidth:!0,label:"Calendly URL",value:le,onChange:e=>ie(e.target.value),error:""!==le&&!le.startsWith("https://calendly.com/")||""===le&&le!==P.calendly_username,helperText:""===le||le.startsWith("https://calendly.com/")?"":"Must be a valid Calendly URL",required:!0}),(0,y.jsx)(h.A,{fullWidth:!0,label:"Current Company",value:oe,onChange:e=>ce(e.target.value)})]})})})}),P&&(0,y.jsx)("div",{className:"min-h-[95%] w-3/4 min-w-[500px] mx-auto px-16 pt-8 !rounded-[48px]",children:(0,y.jsx)(i.A,{className:"p-12 w-4/5 !rounded-[32px]",children:(0,y.jsxs)(o.A,{spacing:4,children:[(0,y.jsxs)(o.A,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,y.jsx)("h1",{className:"text-2xl m-0",children:"Bank Details"}),(0,y.jsx)(c.A,{onClick:async()=>{var e,n;const t={bankName:G};B!==(null===P||void 0===P||null===(e=P.bank)||void 0===e?void 0:e.account_number)&&(t.account_number=B),$!==(null===P||void 0===P||null===(n=P.bank)||void 0===n?void 0:n.routing_number)&&(t.routing_number=$);const[s,r]=await(0,x.A)("/bank/","PUT",t);s?(W((e=>(0,a.A)((0,a.A)({},e),{},{bank:(0,a.A)((0,a.A)({},e.bank),t)}))),z(!0)):S(r.error)},variant:"contained",disabled:!B||!$||B===(null===(n=P.bank)||void 0===n?void 0:n.account_number)&&$===(null===(t=P.bank)||void 0===t?void 0:t.routing_number)&&G===(null===(g=P.bank)||void 0===g?void 0:g.bank_name)||!G,children:P.bank?"Update":"Submit"})]}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.A,{fullWidth:!0,label:"Account Number",onChange:e=>M(e.target.value),required:!0,error:!(B&&/^\d+$/.test(B)||B===(null===(j=P.bank)||void 0===j?void 0:j.account_number)),value:B,type:"password"}),(0,y.jsx)(h.A,{fullWidth:!0,label:"Routing Number",value:$,onChange:e=>Y(e.target.value),required:!0,error:!($&&/^\d+$/.test($)||$===(null===(C=P.bank)||void 0===C?void 0:C.routing_number)),type:"password"})]}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.A,{fullWidth:!0,label:"Bank Name",value:G,onChange:e=>O(e.target.value),required:!0,error:!(G||G===(null===(N=P.bank)||void 0===N?void 0:N.bank_name))}),(0,y.jsx)(b.C,{open:Z,onClose:()=>z(!1)})]}),(0,y.jsxs)(o.A,{direction:"row",alignItems:"center",spacing:1,justifyContent:"flex-end",children:[(0,y.jsx)(p.A,{className:"text-gray-500 text-sm"}),(0,y.jsx)("p",{className:"m-0 text-gray-500",children:"Your information is securely encrypted with Fernet."})]})]})})}),L&&P&&(0,y.jsx)("div",{className:"min-h-[95%] w-3/4 min-w-[500px] mx-auto px-16 pt-8 !rounded-[48px]",children:(0,y.jsx)(i.A,{className:"p-12 w-4/5 !rounded-[32px]",children:(0,y.jsxs)(o.A,{spacing:4,children:[(0,y.jsxs)(o.A,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,y.jsx)("h1",{className:"text-2xl m-0",children:"Bluevine Details (admin only)"}),(0,y.jsx)(c.A,{onClick:async()=>{const e={bluevineEmail:H};K&&K!==(null===P||void 0===P?void 0:P.bluevinePassword)&&(e.bluevinePassword=K);const[n,t]=await(0,x.A)("/bluevine/","PUT",e);n?(W((n=>(0,a.A)((0,a.A)({},n),{},{bodyData:e}))),z(!0)):S(t.error)},variant:"contained",disabled:!H||!K||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(H)||K===P.bluevinePassword&&H===P.bluevineEmail,children:P.bank?"Update":"Submit"})]}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.A,{fullWidth:!0,label:"Bluevine Email",onChange:e=>J(e.target.value),required:!0,error:!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(H),value:H}),(0,y.jsx)(h.A,{fullWidth:!0,label:"Bluevine Password",value:K,onChange:e=>Q(e.target.value),error:!K,required:!0,type:"password"})]}),(0,y.jsxs)(o.A,{direction:"row",alignItems:"center",spacing:1,justifyContent:"flex-end",children:[(0,y.jsx)(p.A,{className:"text-gray-500 text-sm"}),(0,y.jsx)("p",{className:"m-0 text-gray-500",children:"Your information is securely encrypted with Fernet."})]})]})})})]})}}}]);