"use strict";(self.webpackChunkplexfinance=self.webpackChunkplexfinance||[]).push([[726],{58574:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(5446),r=n(2235),s=n(88981),l=n(25333),i=n(9950),o=n(4804),c=n(54975),d=n(44414);function u(e){return(0,i.useEffect)((()=>{console.warn(e.error)})),(0,d.jsx)(a.A,{open:e.open,className:"w-1/2 min-w-[500px] h-full absolute inset-0 m-auto p-16",children:(0,d.jsx)(r.A,{className:"p-12 !rounded-[48px]",children:(0,d.jsxs)(s.A,{spacing:2,children:[(0,d.jsxs)(s.A,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,d.jsxs)("h1",{className:"m-0 text-3xl",children:["Error",e.error.errorCode&&" ".concat(e.error.errorCode),":"," ",e.error.errorMessage]}),(0,d.jsx)(l.A,{onClick:()=>{window.location.reload()},children:(0,d.jsx)(o.A,{})})]}),(0,d.jsxs)("p",{className:"m-0",children:["Try refreshing the page and contact"," ",(0,d.jsx)("a",{href:"mailto:shamith09@berkeley.edu?subject=[Plexfinance Error]",children:"shamith09@berkeley.edu"})," ","if the issue persists."]}),(0,d.jsx)("img",{src:c.kD,alt:"error"})]})})})}},8036:(e,t,n)=>{n.d(t,{C:()=>l});n(9950);var a=n(28510),r=n(96583),s=n(44414);function l(e){return setTimeout((()=>{e.onClose()}),4e3),(0,s.jsx)(r.A,{onClose:e.onClose,open:e.open,PaperProps:{className:"!rounded-[48px] p-12"},children:(0,s.jsx)(a.A,{mode:a.F.SUCCESS})})}},22475:(e,t,n)=>{n.r(t),n.d(t,{ProfilePage:()=>C});var a=n(89379),r=n(9950),s=n(76455),l=n(58574),i=n(88981),o=n(48089),c=n(75165),d=n(41413),u=n(25333),m=n(87498),h=n(2257),x=n(64068),p=n(53777),b=n(8036),g=n(71559),v=n.n(g),j=n(96583),f=n(28170),w=n(79739),A=n(33742),y=n(44414);const k=v();function C(e){var t,n,g,v,C,_,N,P,S;const[T,W]=(0,r.useState)(),[q,I]=(0,r.useState)(),[U,E]=(0,r.useState)(""),[F,L]=(0,r.useState)(!1),[R,B]=(0,r.useState)(null),D=r.useRef(null),[M,$]=(0,r.useState)(!1),[Y,G]=(0,r.useState)(""),[O,Z]=(0,r.useState)(""),[z,H]=(0,r.useState)(""),[J,K]=(0,r.useState)(!1),[Q,V]=(0,r.useState)(""),[X,ee]=(0,r.useState)(""),[te,ne]=(0,r.useState)(""),[ae,re]=(0,r.useState)(""),[se,le]=(0,r.useState)(""),[ie,oe]=(0,r.useState)(""),[ce,de]=(0,r.useState)(""),[ue,me]=(0,r.useState)(""),[he,xe]=(0,r.useState)(""),[pe,be]=(0,r.useState)(""),[ge,ve]=(0,r.useState)(1.2);(0,r.useEffect)((()=>{(async()=>{const[e,t]=await(0,x.A)("/profile/","GET");e?(I(t),$(t.treasurer),V(t.bluevine_email),ee(t.bluevine_password),ne(t.current_position||""),re(t.profile_blurb||""),le(t.linkedin_username||""),oe(t.instagram_username||""),de(t.calendly_username||""),me(t.current_company||""),xe(t.first_name||""),be(t.last_name||""),E("".concat("https://plextech.studentorg.berkeley.edu/member-portal-api","/profile/image/").concat(t.id,"?").concat((new Date).getTime())),t.bank&&(G(t.bank.account_number),Z(t.bank.routing_number),H(t.bank.bank_name))):W(t.error)})()}),[e]);return(0,y.jsxs)(i.A,{spacing:4,justifyContent:"center",alignItems:"center",className:"w-full pt-8 px-8",children:[(0,y.jsxs)(s.mg,{children:[(0,y.jsx)("title",{children:"Profile"}),(0,y.jsx)("meta",{name:"description",content:"Profile information"})]}),T&&(0,y.jsx)(l.A,{open:!!T,error:T}),(0,y.jsx)(o.A,{className:"px-16 py-16 w-full max-w-[1000px] !rounded-[32px] justify-center items-center",children:(0,y.jsx)(i.A,{spacing:4,children:q&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(i.A,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,y.jsx)("h1",{className:"text-2xl m-0",children:"Member Details"}),(0,y.jsx)(c.A,{onClick:async()=>{const[e,t]=await(0,x.A)("/profile/","PUT",{current_position:te,profile_blurb:ae,linkedin_username:se,instagram_username:ie,calendly_username:ce,current_company:ue,first_name:he,last_name:pe});e?K(!0):W(t.error)},variant:"contained",disabled:ae===q.profile_blurb&&se===q.linkedin_username&&ie===q.instagram_username&&ce===q.calendly_username&&ue===q.current_company&&he===q.first_name&&pe===q.last_name||""!==se&&!se.startsWith("https://www.linkedin.com/")||""!==ie&&!ie.startsWith("https://www.instagram.com/")||""!==ce&&!ce.startsWith("https://calendly.com/")||""===ae||""===he||""===pe,children:"Update"})]}),(0,y.jsx)("div",{className:"flex flex-col items-center mb-4",children:(0,y.jsx)("div",{className:"relative",children:(0,y.jsxs)("div",{className:"flex items-end",children:[(0,y.jsxs)("div",{className:"flex flex-col items-center",children:[(0,y.jsx)("h3",{className:"text-lg mb-2",children:"Profile Picture"}),(0,y.jsx)(d.A,{src:U,sx:{width:150,height:150},className:"cursor-pointer"}),(0,y.jsx)("input",{accept:"image/*",type:"file",id:"icon-button-file",onChange:e=>{e.target.files&&e.target.files[0]&&(B(e.target.files[0]),L(!0))},className:"hidden"})]}),(0,y.jsx)("label",{htmlFor:"icon-button-file",children:(0,y.jsx)(u.A,{className:"absolute bottom-0 right-0 bg-white shadow-md hover:bg-gray-100",component:"span",children:(0,y.jsx)(A.A,{})})})]})})}),(0,y.jsxs)(j.A,{open:F,onClose:()=>L(!1),PaperProps:{style:{borderRadius:"24px",padding:"16px"}},children:[(0,y.jsxs)(f.A,{className:"!pb-0",children:[(0,y.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Edit Profile Picture"}),R&&(0,y.jsxs)("div",{className:"flex flex-col items-center",children:[(0,y.jsx)(k,{ref:D,image:R,width:250,height:250,border:50,borderRadius:125,color:[0,0,0,.6],scale:ge}),(0,y.jsxs)("div",{className:"mt-6 w-full",children:[(0,y.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Zoom"}),(0,y.jsx)(m.Ay,{value:ge,min:1,max:3,step:.1,onChange:(e,t)=>ve(t)})]})]})]}),(0,y.jsxs)(w.A,{className:"p-6",children:[(0,y.jsx)(c.A,{onClick:()=>L(!1),children:"Cancel"}),(0,y.jsx)(c.A,{variant:"contained",onClick:async()=>{if(D.current){const e=D.current.getImageScaledToCanvas(),t=document.createElement("canvas");t.width=500,t.height=500;const n=t.getContext("2d");null===n||void 0===n||n.drawImage(e,0,0,500,500),t.toBlob((async e=>{if(!e)return;const t=new FormData;t.append("image",e,"profile.jpg");const[n]=await(0,x.A)("/profile/image/","PUT",t);n&&(E("".concat("https://plextech.studentorg.berkeley.edu/member-portal-api","/profile/image/").concat(null===q||void 0===q?void 0:q.id,"?").concat((new Date).getTime())),L(!1),K(!0))}),"image/jpeg",.8)}},children:"Save"})]})]}),(0,y.jsxs)(i.A,{direction:"row",spacing:2,children:[(0,y.jsx)(h.A,{fullWidth:!0,label:"First Name",value:he,onChange:e=>xe(e.target.value),required:!0,error:""===he,helperText:""===he?"First name is required":""}),(0,y.jsx)(h.A,{fullWidth:!0,label:"Last Name",value:pe,onChange:e=>be(e.target.value),required:!0,error:""===pe,helperText:""===pe?"Last name is required":""})]}),(0,y.jsx)(h.A,{fullWidth:!0,label:"Current Position (admin only)",value:te,onChange:e=>ne(e.target.value),InputProps:{readOnly:!M},disabled:!M,error:M&&""===te,helperText:M&&""===te?"Position is required for admins":""}),(0,y.jsx)(h.A,{fullWidth:!0,label:"Profile Blurb",value:ae,onChange:e=>re(e.target.value),multiline:!0,rows:4,required:!0,inputProps:{maxLength:250},error:""===ae,helperText:""===ae?"Profile blurb is required":"".concat(ae.length," / 250")}),(0,y.jsx)(h.A,{fullWidth:!0,label:"LinkedIn URL",value:se,onChange:e=>le(e.target.value),error:""!==se&&!se.startsWith("https://www.linkedin.com/"),helperText:""===se||se.startsWith("https://www.linkedin.com/")?"":"Must be a valid LinkedIn URL",required:!0}),(0,y.jsx)(h.A,{fullWidth:!0,label:"Instagram URL",value:ie,onChange:e=>oe(e.target.value),error:""!==ie&&!ie.startsWith("https://www.instagram.com/"),helperText:""===ie||ie.startsWith("https://www.instagram.com/")?"":"Must be a valid Instagram URL",required:!0}),(0,y.jsx)(h.A,{fullWidth:!0,label:"Calendly URL",value:ce,onChange:e=>de(e.target.value),error:""!==ce&&!ce.startsWith("https://calendly.com/"),helperText:""===ce||ce.startsWith("https://calendly.com/")?"":"Must be a valid Calendly URL",required:!0}),(0,y.jsx)(h.A,{fullWidth:!0,label:"Current Company",value:ue,onChange:e=>me(e.target.value),error:""===ue,helperText:""===ue?"Company is required":"",required:!0})]})})}),q&&(0,y.jsx)(o.A,{className:"px-16 py-16 w-full max-w-[1000px] !rounded-[32px] justify-center items-center",children:(0,y.jsxs)(i.A,{spacing:4,children:[(0,y.jsxs)(i.A,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,y.jsx)("h1",{className:"text-2xl m-0",children:"Bank Details"}),(0,y.jsx)(c.A,{onClick:async()=>{var e,t;const n={bankName:z};Y!==(null===q||void 0===q||null===(e=q.bank)||void 0===e?void 0:e.account_number)&&(n.account_number=Y),O!==(null===q||void 0===q||null===(t=q.bank)||void 0===t?void 0:t.routing_number)&&(n.routing_number=O);const[r,s]=await(0,x.A)("/bank/","PUT",n);r?(I((e=>(0,a.A)((0,a.A)({},e),{},{bank:(0,a.A)((0,a.A)({},e.bank),n)}))),K(!0)):W(s.error)},variant:"contained",disabled:!Y||!O||Y===(null===(t=q.bank)||void 0===t?void 0:t.account_number)&&O===(null===(n=q.bank)||void 0===n?void 0:n.routing_number)&&z===(null===(g=q.bank)||void 0===g?void 0:g.bank_name)||!z,children:q.bank?"Update":"Submit"})]}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.A,{fullWidth:!0,label:"Account Number",onChange:e=>G(e.target.value),required:!0,error:!(Y&&/^\d+$/.test(Y)||Y===(null===(v=q.bank)||void 0===v?void 0:v.account_number)),helperText:Y&&/^\d+$/.test(Y)||Y===(null===(C=q.bank)||void 0===C?void 0:C.account_number)?"":"Must be a valid account number",value:Y,type:"password"}),(0,y.jsx)(h.A,{fullWidth:!0,label:"Routing Number",value:O,onChange:e=>Z(e.target.value),required:!0,error:!(O&&/^\d+$/.test(O)||O===(null===(_=q.bank)||void 0===_?void 0:_.routing_number)),helperText:O&&/^\d+$/.test(O)||O===(null===(N=q.bank)||void 0===N?void 0:N.routing_number)?"":"Must be a valid routing number",type:"password"})]}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.A,{fullWidth:!0,label:"Bank Name",value:z,onChange:e=>H(e.target.value),required:!0,error:!(z||z===(null===(P=q.bank)||void 0===P?void 0:P.bank_name)),helperText:z||z===(null===(S=q.bank)||void 0===S?void 0:S.bank_name)?"":"Bank name is required"}),(0,y.jsx)(b.C,{open:J,onClose:()=>K(!1)})]}),(0,y.jsxs)(i.A,{direction:"row",alignItems:"center",spacing:1,justifyContent:"flex-end",children:[(0,y.jsx)(p.A,{className:"text-gray-500 text-sm"}),(0,y.jsx)("p",{className:"m-0 text-gray-500",children:"Your information is securely encrypted with Fernet."})]})]})}),M&&q&&(0,y.jsx)(o.A,{className:"px-16 py-16 w-full max-w-[1000px] !rounded-[32px] justify-center items-center",children:(0,y.jsxs)(i.A,{spacing:4,children:[(0,y.jsxs)(i.A,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,y.jsx)("h1",{className:"text-2xl m-0",children:"Bluevine Details (admin only)"}),(0,y.jsx)(c.A,{onClick:async()=>{const e={bluevineEmail:Q};X&&X!==(null===q||void 0===q?void 0:q.bluevinePassword)&&(e.bluevinePassword=X);const[t,n]=await(0,x.A)("/bluevine/","PUT",e);t?(I((t=>(0,a.A)((0,a.A)({},t),{},{bodyData:e}))),K(!0)):W(n.error)},variant:"contained",disabled:!Q||!X||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Q)||X===q.bluevinePassword&&Q===q.bluevineEmail,children:q.bank?"Update":"Submit"})]}),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(h.A,{fullWidth:!0,label:"Bluevine Email",onChange:e=>V(e.target.value),required:!0,error:!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Q),helperText:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(Q)?"":"Must be a valid email address",value:Q}),(0,y.jsx)(h.A,{fullWidth:!0,label:"Bluevine Password",value:X,onChange:e=>ee(e.target.value),error:!X,helperText:X?"":"Password is required",required:!0,type:"password"})]}),(0,y.jsxs)(i.A,{direction:"row",alignItems:"center",spacing:1,justifyContent:"flex-end",children:[(0,y.jsx)(p.A,{className:"text-gray-500 text-sm"}),(0,y.jsx)("p",{className:"m-0 text-gray-500",children:"Your information is securely encrypted with Fernet."})]})]})})]})}}}]);